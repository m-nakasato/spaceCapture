(()=>{"use strict";const e={spaces:null,counter:0,turn:1,spaces1:0,spaces2:0,mode:"",player1Name:"",player2Name:""},t=40,r="#333",a=function(e,t){return Math.floor(Math.random()*(t+1-e))+e},n=function(e){document.querySelector("#msg p").innerHTML=e},c=function(t,r,l){let o=!1;if(r<7&&t<7&&(e.spaces[r][t]++,4==e.spaces[r][t]&&(u(t,r),o=!0)),"h"===l?r>0&&(e.spaces[r-1][t]++,4==e.spaces[r-1][t]&&(u(t,r-1),o=!0)):t>0&&(e.spaces[r][t-1]++,4==e.spaces[r][t-1]&&(u(t-1,r),o=!0)),0==--e.counter){let t="";return t=e.spaces1>e.spaces2?e.player1Name+" Win!!":e.player2Name+" Win!!",void n(t+"<br /><a href='javascript:location.reload()'>Start page</a>")}o?n("Click again!"):(1==e.turn?(e.turn=2,document.querySelector("#player1 .arrow").classList.remove("current"),document.querySelector("#player2 .arrow").classList.add("current")):(e.turn=1,document.querySelector("#player1 .arrow").classList.add("current"),document.querySelector("#player2 .arrow").classList.remove("current")),n("Click on the bar!")),"com"==e.mode&&2==e.turn&&function(){let e=document.querySelectorAll(".wall");for(;;){let t=a(0,e.length-1);if(0==e[t].getAttribute("data-clicked")){setTimeout((function(){e[t].setAttribute("data-clicked",1);let r=e[t].getAttribute("data-x"),a=e[t].getAttribute("data-y"),n=e[t].getAttribute("data-type");c(r,a,n)}),1e3),n("Thinking...");break}}}()};function u(t,r){1==e.turn?(document.querySelector("#x"+t+"y"+r).setAttribute("fill","lime"),document.querySelector("#player1 .spaces span").innerText=++e.spaces1):(document.querySelector("#x"+t+"y"+r).setAttribute("fill","magenta"),document.querySelector("#player2 .spaces span").innerText=++e.spaces2)}function l(t){e.mode=t,"player"==t?(e.player1Name="Player 1",e.player2Name="Player 2"):"com"==t&&(e.player1Name="Player",e.player2Name="Computer"),document.querySelector("#player1 div:not(.arrow) h2").innerHTML=e.player1Name,document.querySelector("#player2 div:not(.arrow) h2").innerHTML=e.player2Name,document.querySelector("#intro").classList.add("hide")}document.documentElement.addEventListener("touchstart",(function(e){e.touches.length>=2&&e.preventDefault()}),{passive:!1});var o=0;document.documentElement.addEventListener("touchend",(function(e){var t=(new Date).getTime();t-o<350&&e.preventDefault(),o=t}),!1),window.addEventListener("DOMContentLoaded",(a=>{!function(){let a=document.querySelector("#board"),n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("fill","black"),n.setAttribute("width",t),n.setAttribute("height",t),n.setAttribute("rx",9),n.setAttribute("ry",9);let u=new Array(7);for(let e=0;e<7;e++)u[e]=new Array(7);for(let e=0;e<7;e++)for(let r=0;r<7;r++)u[e][r]=n.cloneNode(!0),u[e][r].setAttribute("x",3+t*r),u[e][r].setAttribute("y",3+t*e),u[e][r].setAttribute("id","x"+r+"y"+e),a.appendChild(u[e][r]);let o=document.createElementNS("http://www.w3.org/2000/svg","line");o.setAttribute("stroke",r),o.setAttribute("stroke-width",6),o.setAttribute("class","wall"),o.setAttribute("data-type","h"),o.setAttribute("data-clicked",0);let i=new Array(8);for(let e=0;e<8;e++)i[e]=Array(7);for(let r=0;r<8;r++)for(let n=0;n<7;n++)i[r][n]=o.cloneNode(!0),i[r][n].setAttribute("x1",3+t*n+3),i[r][n].setAttribute("y1",3+t*r),i[r][n].setAttribute("x2",3+t*(n+1)-3),i[r][n].setAttribute("y2",3+t*r),i[r][n].setAttribute("data-x",n),i[r][n].setAttribute("data-y",r),a.appendChild(i[r][n]),e.counter++;let s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke",r),s.setAttribute("stroke-width",6),s.setAttribute("class","wall"),s.setAttribute("data-type","v"),s.setAttribute("data-clicked",0);let d=new Array(7);for(let e=0;e<7;e++)d[e]=Array(8);for(let r=0;r<7;r++)for(let n=0;n<8;n++)d[r][n]=s.cloneNode(!0),d[r][n].setAttribute("x1",3+t*n),d[r][n].setAttribute("y1",3+t*r+3),d[r][n].setAttribute("x2",3+t*n),d[r][n].setAttribute("y2",3+t*(r+1)-3),d[r][n].setAttribute("data-x",n),d[r][n].setAttribute("data-y",r),a.appendChild(d[r][n]),e.counter++;e.spaces=new Array(7);for(let t=0;t<7;t++)e.spaces[t]=Array(7).fill(0);document.querySelectorAll(".wall").forEach((t=>{t.addEventListener("click",(t=>{if("com"==e.mode&&2==e.turn)return;if(1==t.currentTarget.getAttribute("data-clicked"))return;t.currentTarget.setAttribute("data-clicked",1);let r=t.currentTarget.getAttribute("data-x"),a=t.currentTarget.getAttribute("data-y"),n=t.currentTarget.getAttribute("data-type");c(r,a,n)}))})),document.querySelector("#mode_player").addEventListener("click",(e=>{l("player")})),document.querySelector("#mode_com").addEventListener("click",(e=>{l("com")}))}()}))})();