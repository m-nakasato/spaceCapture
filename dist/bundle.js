(()=>{"use strict";const t={spaces:null,counter:0,turn:1,spaces1:0,spaces2:0,mode:""},e=40,r="#333",a=function(t,e){return Math.floor(Math.random()*(e+1-t))+t},c=function(t){document.querySelector("#msg p").innerHTML=t},n=function(e,r,l){let o=!1;if(r<7&&e<7&&(t.spaces[r][e]++,4==t.spaces[r][e]&&(u(e,r),o=!0)),"h"===l?r>0&&(t.spaces[r-1][e]++,4==t.spaces[r-1][e]&&(u(e,r-1),o=!0)):e>0&&(t.spaces[r][e-1]++,4==t.spaces[r][e-1]&&(u(e-1,r),o=!0)),0==--t.counter){let e="";return e=t.spaces1>t.spaces2?"Player 1 Win!!":"Player 2 Win!!",void c(e+"<br /><a href='javascript:location.reload()'>Start page</a>")}o?c("Click again!"):(1==t.turn?(t.turn=2,document.querySelector("#player1 .arrow").classList.remove("current"),document.querySelector("#player2 .arrow").classList.add("current")):(t.turn=1,document.querySelector("#player1 .arrow").classList.add("current"),document.querySelector("#player2 .arrow").classList.remove("current")),c("Click on the bar!")),"com"==t.mode&&2==t.turn&&function(){let t=document.querySelectorAll(".wall");for(;;){let e=a(0,t.length-1);if(0==t[e].getAttribute("data-clicked")){t[e].setAttribute("data-clicked",1);let r=t[e].getAttribute("data-x"),a=t[e].getAttribute("data-y"),c=t[e].getAttribute("data-type");n(r,a,c);break}console.log("fail")}}()};function u(e,r){1==t.turn?(document.querySelector("#x"+e+"y"+r).setAttribute("fill","lime"),document.querySelector("#player1 .spaces span").innerText=++t.spaces1):(document.querySelector("#x"+e+"y"+r).setAttribute("fill","magenta"),document.querySelector("#player2 .spaces span").innerText=++t.spaces2)}document.documentElement.addEventListener("touchstart",(function(t){t.touches.length>=2&&t.preventDefault()}),{passive:!1});var l=0;document.documentElement.addEventListener("touchend",(function(t){var e=(new Date).getTime();e-l<350&&t.preventDefault(),l=e}),!1),window.addEventListener("DOMContentLoaded",(a=>{!function(){let a=document.querySelector("#board"),c=document.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("fill","black"),c.setAttribute("width",e),c.setAttribute("height",e),c.setAttribute("rx",9),c.setAttribute("ry",9);let u=new Array(7);for(let t=0;t<7;t++)u[t]=new Array(7);for(let t=0;t<7;t++)for(let r=0;r<7;r++)u[t][r]=c.cloneNode(!0),u[t][r].setAttribute("x",3+e*r),u[t][r].setAttribute("y",3+e*t),u[t][r].setAttribute("id","x"+r+"y"+t),a.appendChild(u[t][r]);let l=document.createElementNS("http://www.w3.org/2000/svg","line");l.setAttribute("stroke",r),l.setAttribute("stroke-width",6),l.setAttribute("class","wall"),l.setAttribute("data-type","h"),l.setAttribute("data-clicked",0);let o=new Array(8);for(let t=0;t<8;t++)o[t]=Array(7);for(let r=0;r<8;r++)for(let c=0;c<7;c++)o[r][c]=l.cloneNode(!0),o[r][c].setAttribute("x1",3+e*c+3),o[r][c].setAttribute("y1",3+e*r),o[r][c].setAttribute("x2",3+e*(c+1)-3),o[r][c].setAttribute("y2",3+e*r),o[r][c].setAttribute("data-x",c),o[r][c].setAttribute("data-y",r),a.appendChild(o[r][c]),t.counter++;let s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke",r),s.setAttribute("stroke-width",6),s.setAttribute("class","wall"),s.setAttribute("data-type","v"),s.setAttribute("data-clicked",0);let i=new Array(7);for(let t=0;t<7;t++)i[t]=Array(8);for(let r=0;r<7;r++)for(let c=0;c<8;c++)i[r][c]=s.cloneNode(!0),i[r][c].setAttribute("x1",3+e*c),i[r][c].setAttribute("y1",3+e*r+3),i[r][c].setAttribute("x2",3+e*c),i[r][c].setAttribute("y2",3+e*(r+1)-3),i[r][c].setAttribute("data-x",c),i[r][c].setAttribute("data-y",r),a.appendChild(i[r][c]),t.counter++;let d=document.createElementNS("http://www.w3.org/2000/svg","circle");d.setAttribute("r",3),d.setAttribute("fill",r);let A=new Array(8);for(let t=0;t<8;t++)A[t]=new Array(8);for(let t=0;t<8;t++)for(let r=0;r<8;r++)A[t][r]=d.cloneNode(!0),A[t][r].setAttribute("cx",3+e*r),A[t][r].setAttribute("cy",3+e*t);t.spaces=new Array(7);for(let e=0;e<7;e++)t.spaces[e]=Array(7).fill(0);document.querySelectorAll(".wall").forEach((e=>{e.addEventListener("click",(e=>{if("com"==t.mode&&2==t.turn)return;if(1==e.currentTarget.getAttribute("data-clicked"))return;e.currentTarget.setAttribute("data-clicked",1);let r=e.currentTarget.getAttribute("data-x"),a=e.currentTarget.getAttribute("data-y"),c=e.currentTarget.getAttribute("data-type");n(r,a,c)}))})),document.querySelector("#mode_player").addEventListener("click",(e=>{t.mode="player",document.querySelector("#intro").classList.add("hide")})),document.querySelector("#mode_com").addEventListener("click",(e=>{t.mode="com",document.querySelector("#intro").classList.add("hide")}))}()}))})();